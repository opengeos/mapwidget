{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to mapwidget","text":"<p>Custom Jupyter widgets for creating interactive maps with bidirectional communication</p> <p>The mapwidget package provides a set of custom map widgets for creating interactive maps in a Jupyter environment using different JavaScript mapping libraries, such as Cesium, Leaflet, Mapbox, MapLibre, and OpenLayers. The widgets are built on top of the anywidget Python package.</p> <ul> <li>Free software: MIT license</li> <li>Documentation: https://mapwidget.gishub.org</li> </ul>"},{"location":"#examples","title":"Examples","text":"<ul> <li>Cesium</li> <li>Leaflet</li> <li>Mapbox</li> <li>MapLibre</li> <li>OpenLayers</li> </ul>"},{"location":"#demos","title":"Demos","text":""},{"location":"#cesium","title":"Cesium","text":""},{"location":"#mapbox","title":"Mapbox","text":""},{"location":"#maplibre","title":"MapLibre","text":""},{"location":"basemaps/","title":"basemaps module","text":"<p>Module for basemaps.</p>"},{"location":"basemaps/#mapwidget.basemaps.get_basemap_list","title":"<code>get_basemap_list(free_only=True)</code>","text":"<p>Returns a list of xyz services.</p> <p>Parameters:</p> Name Type Description Default <code>free_only</code> <code>bool</code> <p>Whether to return only free xyz tile services that do not require an access token. Defaults to True.</p> <code>True</code> <p>Returns:</p> Name Type Description <code>list</code> <p>A list of xyz services.</p> Source code in <code>mapwidget/basemaps.py</code> <pre><code>def get_basemap_list(free_only=True):\n    \"\"\"Returns a list of xyz services.\n\n    Args:\n        free_only (bool, optional): Whether to return only free xyz tile services that do not require an access token. Defaults to True.\n\n    Returns:\n        list: A list of xyz services.\n    \"\"\"\n\n    return list(get_xyz_dict(free_only).keys())\n</code></pre>"},{"location":"basemaps/#mapwidget.basemaps.get_xyz_dict","title":"<code>get_xyz_dict(free_only=True)</code>","text":"<p>Returns a dictionary of xyz services.</p> <p>Parameters:</p> Name Type Description Default <code>free_only</code> <code>bool</code> <p>Whether to return only free xyz tile services that do not require an access token. Defaults to True.</p> <code>True</code> <p>Returns:</p> Name Type Description <code>dict</code> <p>A dictionary of xyz services.</p> Source code in <code>mapwidget/basemaps.py</code> <pre><code>def get_xyz_dict(free_only=True):\n    \"\"\"Returns a dictionary of xyz services.\n\n    Args:\n        free_only (bool, optional): Whether to return only free xyz tile services that do not require an access token. Defaults to True.\n\n    Returns:\n        dict: A dictionary of xyz services.\n    \"\"\"\n\n    xyz_dict = {}\n    for item in xyz.values():\n        try:\n            name = item[\"name\"]\n            tile = _unpack_sub_parameters(xyz, name)\n            if _unpack_sub_parameters(xyz, name).requires_token():\n                if free_only:\n                    pass\n                else:\n                    xyz_dict[name] = tile\n            else:\n                xyz_dict[name] = tile\n\n        except Exception:\n            for sub_item in item:\n                name = item[sub_item][\"name\"]\n                tile = _unpack_sub_parameters(xyz, name)\n                if _unpack_sub_parameters(xyz, name).requires_token():\n                    if free_only:\n                        pass\n                    else:\n                        xyz_dict[name] = tile\n                else:\n                    xyz_dict[name] = tile\n\n    xyz_dict = collections.OrderedDict(sorted(xyz_dict.items()))\n\n    tiles = xyz_tiles\n\n    for item in xyz_dict:\n        name = xyz_dict[item].name\n        url = xyz_dict[item].build_url()\n        attribution = xyz_dict[item].attribution\n        if \"max_zoom\" in xyz_dict[item].keys():\n            max_zoom = xyz_dict[item][\"max_zoom\"]\n        else:\n            max_zoom = 24\n\n        tiles[item] = {\n            \"name\": name,\n            \"url\": url,\n            \"attribution\": attribution,\n            \"max_zoom\": max_zoom,\n        }\n\n    return tiles\n</code></pre>"},{"location":"cesium/","title":"cesium module","text":""},{"location":"cesium/#mapwidget.cesium.Map","title":"<code>Map</code>","text":"<p>               Bases: <code>AnyWidget</code></p> <p>Map widget</p> <p>Parameters:</p> Name Type Description Default <code>anywidget</code> <code>_type_</code> <p>description</p> required Source code in <code>mapwidget/cesium.py</code> <pre><code>class Map(anywidget.AnyWidget):\n    \"\"\"Map widget\n\n    Args:\n        anywidget (_type_): _description_\n    \"\"\"\n\n    _cwd = os.path.dirname(os.path.abspath(__file__))\n    _esm = pathlib.Path(os.path.join(_cwd, \"javascript\", \"cesium.js\"))\n    _css = pathlib.Path(os.path.join(_cwd, \"styles\", \"cesium.css\"))\n    default_token = os.environ.get(\"CESIUM_TOKEN\")\n    token = traitlets.Unicode(default_token).tag(sync=True)\n    center = traitlets.List([40, -100]).tag(sync=True, o=True)\n    zoom = traitlets.Float(4).tag(sync=True, o=True)\n    bounds = traitlets.List([0, 0, 0, 0]).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n    clicked_latlng = traitlets.List([None, None]).tag(sync=True, o=True)\n    altitude = traitlets.Float(0).tag(sync=True, o=True)\n</code></pre>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#v012-mar-22-2023","title":"v0.1.2 - Mar 22, 2023","text":"<ul> <li>Added basemaps module (#9)</li> </ul>"},{"location":"changelog/#v011-mar-22-2023","title":"v0.1.1 - Mar 22, 2023","text":"<ul> <li>Added Dockerfile and docker image (#7)</li> <li>Updated mapbox and cesium notebooks (#6)</li> <li>Added badges</li> </ul>"},{"location":"changelog/#v010-mar-20-2023","title":"v0.1.0 - Mar 20, 2023","text":"<ul> <li>Added notebook examples</li> </ul>"},{"location":"changelog/#v006-mar-18-2023","title":"v0.0.6 - Mar 18, 2023","text":"<ul> <li>Updated mapbox and maplibre modules to use ESM</li> </ul>"},{"location":"changelog/#v005-mar-18-2023","title":"v0.0.5 - Mar 18, 2023","text":"<ul> <li>Added mapbox, maplibre, and openlayers modules</li> </ul>"},{"location":"changelog/#v004-mar-18-2023","title":"v0.0.4 - Mar 18, 2023","text":"<ul> <li>Added js and styles to sdist</li> </ul>"},{"location":"changelog/#v003-mar-18-2023","title":"v0.0.3 - Mar 18, 2023","text":"<ul> <li>Added Cesium module</li> </ul>"},{"location":"changelog/#v002-jan-23-2023","title":"v0.0.2 - Jan 23, 2023","text":"<ul> <li>Added Map class</li> </ul>"},{"location":"changelog/#v001-jan-22-2023","title":"v0.0.1 - Jan 22, 2023","text":"<ul> <li>Initial release</li> </ul>"},{"location":"contributing/","title":"Contributing","text":"<p>Contributions are welcome, and they are greatly appreciated! Every little bit helps, and credit will always be given.</p> <p>You can contribute in many ways:</p>"},{"location":"contributing/#types-of-contributions","title":"Types of Contributions","text":""},{"location":"contributing/#report-bugs","title":"Report Bugs","text":"<p>Report bugs at https://github.com/opengeos/mapwidget/issues.</p> <p>If you are reporting a bug, please include:</p> <ul> <li>Your operating system name and version.</li> <li>Any details about your local setup that might be helpful in troubleshooting.</li> <li>Detailed steps to reproduce the bug.</li> </ul>"},{"location":"contributing/#fix-bugs","title":"Fix Bugs","text":"<p>Look through the GitHub issues for bugs. Anything tagged with <code>bug</code> and <code>help wanted</code> is open to whoever wants to implement it.</p>"},{"location":"contributing/#implement-features","title":"Implement Features","text":"<p>Look through the GitHub issues for features. Anything tagged with <code>enhancement</code> and <code>help wanted</code> is open to whoever wants to implement it.</p>"},{"location":"contributing/#write-documentation","title":"Write Documentation","text":"<p>mapwidget could always use more documentation, whether as part of the official mapwidget docs, in docstrings, or even on the web in blog posts, articles, and such.</p>"},{"location":"contributing/#submit-feedback","title":"Submit Feedback","text":"<p>The best way to send feedback is to file an issue at https://github.com/opengeos/mapwidget/issues.</p> <p>If you are proposing a feature:</p> <ul> <li>Explain in detail how it would work.</li> <li>Keep the scope as narrow as possible, to make it easier to implement.</li> <li>Remember that this is a volunteer-driven project, and that contributions are welcome :)</li> </ul>"},{"location":"contributing/#get-started","title":"Get Started!","text":"<p>Ready to contribute? Here's how to set up mapwidget for local development.</p> <ol> <li> <p>Fork the mapwidget repo on GitHub.</p> </li> <li> <p>Clone your fork locally:</p> <pre><code>$ git clone git@github.com:your_name_here/mapwidget.git\n</code></pre> </li> <li> <p>Install your local copy into a virtualenv. Assuming you have     virtualenvwrapper installed, this is how you set up your fork for     local development:</p> <pre><code>$ mkvirtualenv mapwidget\n$ cd mapwidget/\n$ python setup.py develop\n</code></pre> </li> <li> <p>Create a branch for local development:</p> <pre><code>$ git checkout -b name-of-your-bugfix-or-feature\n</code></pre> <p>Now you can make your changes locally.</p> </li> <li> <p>When you're done making changes, check that your changes pass flake8     and the tests, including testing other Python versions with tox:</p> <pre><code>$ flake8 mapwidget tests\n$ python setup.py test or pytest\n$ tox\n</code></pre> <p>To get flake8 and tox, just pip install them into your virtualenv.</p> </li> <li> <p>Commit your changes and push your branch to GitHub:</p> <pre><code>$ git add .\n$ git commit -m \"Your detailed description of your changes.\"\n$ git push origin name-of-your-bugfix-or-feature\n</code></pre> </li> <li> <p>Submit a pull request through the GitHub website.</p> </li> </ol>"},{"location":"contributing/#pull-request-guidelines","title":"Pull Request Guidelines","text":"<p>Before you submit a pull request, check that it meets these guidelines:</p> <ol> <li>The pull request should include tests.</li> <li>If the pull request adds functionality, the docs should be updated.     Put your new functionality into a function with a docstring, and add     the feature to the list in README.rst.</li> <li>The pull request should work for Python 3.5, 3.6, 3.7 and 3.8, and     for PyPy. Check https://github.com/opengeos/mapwidget/pull_requests and make sure that the tests pass for all     supported Python versions.</li> </ol>"},{"location":"faq/","title":"FAQ","text":""},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#install-from-pypi","title":"Install from PyPI","text":"<p>mapwdiget is available on PyPI. To install mapwidget, run this command in your terminal:</p> <pre><code>pip install mapwidget\n</code></pre>"},{"location":"installation/#install-from-conda-forge","title":"Install from conda-forge","text":"<p>mapwidget is also available on conda-forge. If you have Anaconda or Miniconda installed on your computer, you can install mapwidget using the following command:</p> <pre><code>conda install -c conda-forge mapwidget\n</code></pre>"},{"location":"installation/#use-docker","title":"Use docker","text":"<p>You can also use docker to run mapwidget:</p> <pre><code>docker run -it -p 8888:8888 opengeos/mapwidget:latest\n</code></pre>"},{"location":"installation/#from-sources","title":"From sources","text":"<p>The sources for mapwidget can be downloaded from the Github repo.</p> <p>You can clone the public repository:</p> <pre><code>git clone git://github.com/opengeos/mapwidget\n</code></pre>"},{"location":"leaflet/","title":"leaflet module","text":""},{"location":"leaflet/#mapwidget.leaflet.Map","title":"<code>Map</code>","text":"<p>               Bases: <code>AnyWidget</code></p> <p>Map widget</p> <p>Parameters:</p> Name Type Description Default <code>anywidget</code> <code>_type_</code> <p>description</p> required Source code in <code>mapwidget/leaflet.py</code> <pre><code>class Map(anywidget.AnyWidget):\n    \"\"\"Map widget\n\n    Args:\n        anywidget (_type_): _description_\n    \"\"\"\n\n    _cwd = os.path.dirname(os.path.abspath(__file__))\n    _esm = pathlib.Path(os.path.join(_cwd, \"javascript\", \"leaflet.js\"))\n    _css = pathlib.Path(os.path.join(_cwd, \"styles\", \"leaflet.css\"))\n    center = traitlets.List([40, -100]).tag(sync=True, o=True)\n    zoom = traitlets.Int(4).tag(sync=True, o=True)\n    bounds = traitlets.List([0, 0, 0, 0]).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n    clicked_latlng = traitlets.List([None, None]).tag(sync=True, o=True)\n\n    def add_basemap(self, name, opacity=1.0, **kwargs):\n        from .basemaps import get_xyz_dict\n\n        xyz_tiles = get_xyz_dict()\n\n        if name in xyz_tiles:\n            url = xyz_tiles[name][\"url\"]\n            attribution = xyz_tiles[name][\"attribution\"]\n            max_zoom = xyz_tiles[name][\"max_zoom\"]\n            self.send(\n                {\n                    \"type\": \"add_basemap\",\n                    \"url\": url,\n                    \"attribution\": attribution,\n                    \"maxZoom\": max_zoom,\n                    \"opacity\": opacity,\n                    \"name\": name,\n                }\n            )\n\n        else:\n            raise ValueError(\n                f\"Basemap {name} not found. It must be one of the following: {list(xyz_tiles.keys())}\"\n            )\n\n    def add_layer(\n        self, url, name=\"Layer\", attribution=\"\", max_zoom=24, opacity=1.0, **kwargs\n    ):\n        self.send(\n            {\n                \"type\": \"add_layer\",\n                \"url\": url,\n                \"attribution\": attribution,\n                \"maxZoom\": max_zoom,\n                \"name\": name,\n                \"opacity\": opacity,\n            }\n        )\n</code></pre>"},{"location":"mapbox/","title":"mapbox module","text":""},{"location":"mapbox/#mapwidget.mapbox.Map","title":"<code>Map</code>","text":"<p>               Bases: <code>AnyWidget</code></p> <p>Create a Mapbox map widget.</p> Source code in <code>mapwidget/mapbox.py</code> <pre><code>class Map(anywidget.AnyWidget):\n    \"\"\"Create a Mapbox map widget.\"\"\"\n\n    _cwd = os.path.dirname(os.path.abspath(__file__))\n    _esm = pathlib.Path(os.path.join(_cwd, \"javascript\", \"mapbox.js\"))\n    _css = pathlib.Path(os.path.join(_cwd, \"styles\", \"mapbox.css\"))\n    default_token = os.environ.get(\"MAPBOX_TOKEN\")\n    token = traitlets.Unicode(default_token).tag(sync=True)\n    center = traitlets.List([0, 20]).tag(sync=True, o=True)\n    zoom = traitlets.Float(2).tag(sync=True, o=True)\n    bounds = traitlets.List([0, 0, 0, 0]).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n    clicked_latlng = traitlets.List([None, None]).tag(sync=True, o=True)\n\n    def set_esm(self, esm, container=\"map\"):\n        \"\"\"Set esm attribute. Can be a string, a file path, or a url.\n            See examples at https://docs.mapbox.com/mapbox-gl-js/example/\n            Open an example and click on the 'Edit in CodePen' button.\n            Then copy the code from the 'JS' tab, and assign it to the esm parameter.\n\n        Args:\n            esm (str): The esm string, file path, or url.\n            container (str, optional): The container name. Defaults to 'map'.\n\n        Raises:\n            TypeError: If esm is not a string.\n        \"\"\"\n        if isinstance(esm, str):\n            if os.path.isfile(esm):\n                with open(esm, \"r\") as f:\n                    content = f.read()\n            elif esm.startswith(\"http\"):\n                import urllib.request\n\n                with urllib.request.urlopen(esm) as response:\n                    content = response.read().decode(\"utf-8\")\n            else:\n                content = esm\n\n            self._esm = self._create_esm(content, container=container)\n\n        else:\n            raise TypeError(\"esm must be a string\")\n\n    def set_css(self, css, container=\"map\"):\n        \"\"\"Set css attribute. Can be a string, a file path, or a url.\n            See examples at https://docs.mapbox.com/mapbox-gl-js/example/\n            Open an example and click on the 'Edit in CodePen' button.\n            Then copy the code from the 'CSS' tab, and assign it to the css parameter.\n        Args:\n            css (str): The css string, file path, or url.\n\n        Raises:\n            TypeError: If css is not a string.\n        \"\"\"\n        if isinstance(css, str):\n            if os.path.isfile(css):\n                with open(css, \"r\") as f:\n                    content = f.read()\n            elif css.startswith(\"http\"):\n                import urllib.request\n\n                with urllib.request.urlopen(css) as response:\n                    content = response.read().decode(\"utf-8\")\n            else:\n                content = css\n\n            self._css = content.replace(f\"#{container}\", f\"#div\").replace(\n                f\".{container}\", f\".div\"\n            )\n        else:\n            raise TypeError(\"css must be a string\")\n\n    def _create_esm(self, esm, container=\"map\"):\n        \"\"\"Create esm string by replacing the container name.\n\n        Args:\n            esm (str): The esm string.\n            container (str, optional): The container name. Defaults to 'map'.\n\n        Returns:\n            str: The esm string with the container name replaced.\n        \"\"\"\n        _cwd = os.path.dirname(os.path.abspath(__file__))\n        _esm = pathlib.Path(os.path.join(_cwd, \"javascript\", \"mapbox.js\"))\n\n        with open(_esm, \"r\") as f:\n            lines = f.readlines()\n\n        header = []\n        footer = []\n\n        for index, line in enumerate(lines):\n            if line.strip() == \"// Map content\":\n                header = lines[: index + 1]\n                break\n\n        for index, line in enumerate(lines):\n            if line.strip() == \"// Footer\":\n                footer = lines[index:]\n                break\n\n        content = esm.replace(f\"'{container}'\", \"div\").replace(f'\"{container}\"', \"div\")\n        esm = \"\".join(header) + content + \"\".join(footer)\n\n        return esm\n\n    def _save_esm(self, output):\n        \"\"\"Save esm to file\n\n        Args:\n            output (str): The output file path.\n        \"\"\"\n\n        with open(output, \"w\") as f:\n            f.write(self._esm)\n</code></pre>"},{"location":"mapbox/#mapwidget.mapbox.Map.set_css","title":"<code>set_css(css, container='map')</code>","text":"<p>Set css attribute. Can be a string, a file path, or a url.     See examples at https://docs.mapbox.com/mapbox-gl-js/example/     Open an example and click on the 'Edit in CodePen' button.     Then copy the code from the 'CSS' tab, and assign it to the css parameter. Args:     css (str): The css string, file path, or url.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If css is not a string.</p> Source code in <code>mapwidget/mapbox.py</code> <pre><code>def set_css(self, css, container=\"map\"):\n    \"\"\"Set css attribute. Can be a string, a file path, or a url.\n        See examples at https://docs.mapbox.com/mapbox-gl-js/example/\n        Open an example and click on the 'Edit in CodePen' button.\n        Then copy the code from the 'CSS' tab, and assign it to the css parameter.\n    Args:\n        css (str): The css string, file path, or url.\n\n    Raises:\n        TypeError: If css is not a string.\n    \"\"\"\n    if isinstance(css, str):\n        if os.path.isfile(css):\n            with open(css, \"r\") as f:\n                content = f.read()\n        elif css.startswith(\"http\"):\n            import urllib.request\n\n            with urllib.request.urlopen(css) as response:\n                content = response.read().decode(\"utf-8\")\n        else:\n            content = css\n\n        self._css = content.replace(f\"#{container}\", f\"#div\").replace(\n            f\".{container}\", f\".div\"\n        )\n    else:\n        raise TypeError(\"css must be a string\")\n</code></pre>"},{"location":"mapbox/#mapwidget.mapbox.Map.set_esm","title":"<code>set_esm(esm, container='map')</code>","text":"<p>Set esm attribute. Can be a string, a file path, or a url.     See examples at https://docs.mapbox.com/mapbox-gl-js/example/     Open an example and click on the 'Edit in CodePen' button.     Then copy the code from the 'JS' tab, and assign it to the esm parameter.</p> <p>Parameters:</p> Name Type Description Default <code>esm</code> <code>str</code> <p>The esm string, file path, or url.</p> required <code>container</code> <code>str</code> <p>The container name. Defaults to 'map'.</p> <code>'map'</code> <p>Raises:</p> Type Description <code>TypeError</code> <p>If esm is not a string.</p> Source code in <code>mapwidget/mapbox.py</code> <pre><code>def set_esm(self, esm, container=\"map\"):\n    \"\"\"Set esm attribute. Can be a string, a file path, or a url.\n        See examples at https://docs.mapbox.com/mapbox-gl-js/example/\n        Open an example and click on the 'Edit in CodePen' button.\n        Then copy the code from the 'JS' tab, and assign it to the esm parameter.\n\n    Args:\n        esm (str): The esm string, file path, or url.\n        container (str, optional): The container name. Defaults to 'map'.\n\n    Raises:\n        TypeError: If esm is not a string.\n    \"\"\"\n    if isinstance(esm, str):\n        if os.path.isfile(esm):\n            with open(esm, \"r\") as f:\n                content = f.read()\n        elif esm.startswith(\"http\"):\n            import urllib.request\n\n            with urllib.request.urlopen(esm) as response:\n                content = response.read().decode(\"utf-8\")\n        else:\n            content = esm\n\n        self._esm = self._create_esm(content, container=container)\n\n    else:\n        raise TypeError(\"esm must be a string\")\n</code></pre>"},{"location":"maplibre/","title":"maplibre module","text":""},{"location":"maplibre/#mapwidget.maplibre.Map","title":"<code>Map</code>","text":"<p>               Bases: <code>AnyWidget</code></p> <p>Create a MapLibre map widget.</p> Source code in <code>mapwidget/maplibre.py</code> <pre><code>class Map(anywidget.AnyWidget):\n    \"\"\"Create a MapLibre map widget.\"\"\"\n\n    _cwd = os.path.dirname(os.path.abspath(__file__))\n    _esm = pathlib.Path(os.path.join(_cwd, \"javascript\", \"maplibre.js\"))\n    _css = pathlib.Path(os.path.join(_cwd, \"styles\", \"maplibre.css\"))\n    center = traitlets.List([0, 20]).tag(sync=True, o=True)\n    zoom = traitlets.Float(2).tag(sync=True, o=True)\n    bounds = traitlets.List([0, 0, 0, 0]).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n    clicked_latlng = traitlets.List([None, None]).tag(sync=True, o=True)\n    calls = traitlets.List(traitlets.Dict(), default_value=[]).tag(sync=True, o=True)\n\n    def add_call(self, method: str, args: list = None, kwargs: dict = None):\n        \"\"\"Invoke a JS map method with arguments.\"\"\"\n        if args is None:\n            args = []\n        if kwargs is None:\n            kwargs = {}\n        self.calls = self.calls + [{\"method\": method, \"args\": args, \"kwargs\": kwargs}]\n\n    def set_esm(self, esm, container=\"map\"):\n        \"\"\"Set esm attribute. Can be a string, a file path, or a url.\n            See examples at https://maplibre.org/maplibre-gl-js-docs/example/\n            Open an example and click on the 'Edit in CodePen' button.\n            Then copy the code from the 'JS' tab, and assign it to the esm parameter.\n\n        Args:\n            esm (str): The esm string, file path, or url.\n            container (str, optional): The container name. Defaults to 'map'.\n\n        Raises:\n            TypeError: If esm is not a string.\n        \"\"\"\n        if isinstance(esm, str):\n            if os.path.isfile(esm):\n                with open(esm, \"r\") as f:\n                    content = f.read()\n            elif esm.startswith(\"http\"):\n                import urllib.request\n\n                with urllib.request.urlopen(esm) as response:\n                    content = response.read().decode(\"utf-8\")\n            else:\n                content = esm\n\n            self._esm = self._create_esm(content, container=container)\n\n        else:\n            raise TypeError(\"esm must be a string\")\n\n    def set_css(self, css, container=\"map\"):\n        \"\"\"Set css attribute. Can be a string, a file path, or a url.\n            See examples at https://maplibre.org/maplibre-gl-js-docs/example/\n            Open an example and click on the 'Edit in CodePen' button.\n            Then copy the code from the 'CSS' tab, and assign it to the css parameter.\n        Args:\n            css (str): The css string, file path, or url.\n\n        Raises:\n            TypeError: If css is not a string.\n        \"\"\"\n        if isinstance(css, str):\n            if os.path.isfile(css):\n                with open(css, \"r\") as f:\n                    content = f.read()\n            elif css.startswith(\"http\"):\n                import urllib.request\n\n                with urllib.request.urlopen(css) as response:\n                    content = response.read().decode(\"utf-8\")\n            else:\n                content = css\n\n            self._css = content.replace(f\"#{container}\", f\"#div\").replace(\n                f\".{container}\", f\".div\"\n            )\n        else:\n            raise TypeError(\"css must be a string\")\n\n    def _create_esm(self, esm, container=\"map\"):\n        \"\"\"Create esm string by replacing the container name.\n\n        Args:\n            esm (str): The esm string.\n            container (str, optional): The container name. Defaults to 'map'.\n\n        Returns:\n            str: The esm string with the container name replaced.\n        \"\"\"\n        _cwd = os.path.dirname(os.path.abspath(__file__))\n        _esm = pathlib.Path(os.path.join(_cwd, \"javascript\", \"maplibre.js\"))\n\n        with open(_esm, \"r\") as f:\n            lines = f.readlines()\n\n        header = []\n        footer = []\n\n        for index, line in enumerate(lines):\n            if line.strip() == \"// Map content\":\n                header = lines[: index + 1]\n                break\n\n        for index, line in enumerate(lines):\n            if line.strip() == \"// Footer\":\n                footer = lines[index:]\n                break\n\n        content = esm.replace(f\"'{container}'\", \"div\").replace(f'\"{container}\"', \"div\")\n        esm = \"\".join(header) + content + \"\".join(footer)\n\n        return esm\n\n    def _save_esm(self, output):\n        \"\"\"Save esm to file\n\n        Args:\n            output (str): The output file path.\n        \"\"\"\n\n        with open(output, \"w\") as f:\n            f.write(self._esm)\n</code></pre>"},{"location":"maplibre/#mapwidget.maplibre.Map.add_call","title":"<code>add_call(method, args=None, kwargs=None)</code>","text":"<p>Invoke a JS map method with arguments.</p> Source code in <code>mapwidget/maplibre.py</code> <pre><code>def add_call(self, method: str, args: list = None, kwargs: dict = None):\n    \"\"\"Invoke a JS map method with arguments.\"\"\"\n    if args is None:\n        args = []\n    if kwargs is None:\n        kwargs = {}\n    self.calls = self.calls + [{\"method\": method, \"args\": args, \"kwargs\": kwargs}]\n</code></pre>"},{"location":"maplibre/#mapwidget.maplibre.Map.set_css","title":"<code>set_css(css, container='map')</code>","text":"<p>Set css attribute. Can be a string, a file path, or a url.     See examples at https://maplibre.org/maplibre-gl-js-docs/example/     Open an example and click on the 'Edit in CodePen' button.     Then copy the code from the 'CSS' tab, and assign it to the css parameter. Args:     css (str): The css string, file path, or url.</p> <p>Raises:</p> Type Description <code>TypeError</code> <p>If css is not a string.</p> Source code in <code>mapwidget/maplibre.py</code> <pre><code>def set_css(self, css, container=\"map\"):\n    \"\"\"Set css attribute. Can be a string, a file path, or a url.\n        See examples at https://maplibre.org/maplibre-gl-js-docs/example/\n        Open an example and click on the 'Edit in CodePen' button.\n        Then copy the code from the 'CSS' tab, and assign it to the css parameter.\n    Args:\n        css (str): The css string, file path, or url.\n\n    Raises:\n        TypeError: If css is not a string.\n    \"\"\"\n    if isinstance(css, str):\n        if os.path.isfile(css):\n            with open(css, \"r\") as f:\n                content = f.read()\n        elif css.startswith(\"http\"):\n            import urllib.request\n\n            with urllib.request.urlopen(css) as response:\n                content = response.read().decode(\"utf-8\")\n        else:\n            content = css\n\n        self._css = content.replace(f\"#{container}\", f\"#div\").replace(\n            f\".{container}\", f\".div\"\n        )\n    else:\n        raise TypeError(\"css must be a string\")\n</code></pre>"},{"location":"maplibre/#mapwidget.maplibre.Map.set_esm","title":"<code>set_esm(esm, container='map')</code>","text":"<p>Set esm attribute. Can be a string, a file path, or a url.     See examples at https://maplibre.org/maplibre-gl-js-docs/example/     Open an example and click on the 'Edit in CodePen' button.     Then copy the code from the 'JS' tab, and assign it to the esm parameter.</p> <p>Parameters:</p> Name Type Description Default <code>esm</code> <code>str</code> <p>The esm string, file path, or url.</p> required <code>container</code> <code>str</code> <p>The container name. Defaults to 'map'.</p> <code>'map'</code> <p>Raises:</p> Type Description <code>TypeError</code> <p>If esm is not a string.</p> Source code in <code>mapwidget/maplibre.py</code> <pre><code>def set_esm(self, esm, container=\"map\"):\n    \"\"\"Set esm attribute. Can be a string, a file path, or a url.\n        See examples at https://maplibre.org/maplibre-gl-js-docs/example/\n        Open an example and click on the 'Edit in CodePen' button.\n        Then copy the code from the 'JS' tab, and assign it to the esm parameter.\n\n    Args:\n        esm (str): The esm string, file path, or url.\n        container (str, optional): The container name. Defaults to 'map'.\n\n    Raises:\n        TypeError: If esm is not a string.\n    \"\"\"\n    if isinstance(esm, str):\n        if os.path.isfile(esm):\n            with open(esm, \"r\") as f:\n                content = f.read()\n        elif esm.startswith(\"http\"):\n            import urllib.request\n\n            with urllib.request.urlopen(esm) as response:\n                content = response.read().decode(\"utf-8\")\n        else:\n            content = esm\n\n        self._esm = self._create_esm(content, container=container)\n\n    else:\n        raise TypeError(\"esm must be a string\")\n</code></pre>"},{"location":"openlayers/","title":"openlayers module","text":""},{"location":"openlayers/#mapwidget.openlayers.Map","title":"<code>Map</code>","text":"<p>               Bases: <code>AnyWidget</code></p> <p>Map widget</p> <p>Parameters:</p> Name Type Description Default <code>anywidget</code> <code>_type_</code> <p>description</p> required Source code in <code>mapwidget/openlayers.py</code> <pre><code>class Map(anywidget.AnyWidget):\n    \"\"\"Map widget\n\n    Args:\n        anywidget (_type_): _description_\n    \"\"\"\n\n    _cwd = os.path.dirname(os.path.abspath(__file__))\n    _esm = pathlib.Path(os.path.join(_cwd, \"javascript\", \"openlayers.js\"))\n    _css = pathlib.Path(os.path.join(_cwd, \"styles\", \"openlayers.css\"))\n    center = traitlets.List([0, 20]).tag(sync=True, o=True)\n    zoom = traitlets.Float(2).tag(sync=True, o=True)\n    bounds = traitlets.List([0, 0, 0, 0]).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n    clicked_latlng = traitlets.List([None, None]).tag(sync=True, o=True)\n</code></pre>"},{"location":"usage/","title":"Usage","text":"<p>To use mapwidget in a project:</p> <pre><code>import mapwidget\n</code></pre>"},{"location":"examples/cesium/","title":"Cesium","text":"In\u00a0[\u00a0]: Copied! <pre># %pip install mapwidget\n</pre> # %pip install mapwidget In\u00a0[\u00a0]: Copied! <pre>import os\nimport mapwidget.cesium as mapwidget\n</pre> import os import mapwidget.cesium as mapwidget <p>You need a Cesium access token to use the Cesium widget. First, sign up for a free Cesium account. Then, you can create a token by following the instructions here. Set <code>CESIUM_TOKEN</code> as an environment variable to use the Cesium widget. Alternatively, uncomment the following code block and replace <code>YOUR-CESIUM-TOKEN</code> with your Cesium access token.</p> In\u00a0[\u00a0]: Copied! <pre>if os.environ.get(\"CESIUM_TOKEN\") is None:\n    token = \"YOUR-CESIUM-TOKEN\"\nelse:\n    token = os.environ.get(\"CESIUM_TOKEN\")\n</pre> if os.environ.get(\"CESIUM_TOKEN\") is None:     token = \"YOUR-CESIUM-TOKEN\" else:     token = os.environ.get(\"CESIUM_TOKEN\") <p>San Francisco</p> In\u00a0[\u00a0]: Copied! <pre>m = mapwidget.Map(center=[37.655, -122.4175], altitude=400, height=\"600px\", token=token)\nm\n</pre> m = mapwidget.Map(center=[37.655, -122.4175], altitude=400, height=\"600px\", token=token) m <p></p> <p>New York City</p> In\u00a0[\u00a0]: Copied! <pre>m = mapwidget.Map(\n    center=[40.70605, -74.01177], altitude=600, height=\"600px\", token=token\n)\nm\n</pre> m = mapwidget.Map(     center=[40.70605, -74.01177], altitude=600, height=\"600px\", token=token ) m <p></p> In\u00a0[\u00a0]: Copied! <pre>m.center\n</pre> m.center In\u00a0[\u00a0]: Copied! <pre>m.zoom\n</pre> m.zoom"},{"location":"examples/esm/","title":"Esm","text":"In\u00a0[\u00a0]: Copied! <pre># %pip install mapwidget\n</pre> # %pip install mapwidget In\u00a0[\u00a0]: Copied! <pre>import os\nimport anywidget\nimport traitlets\n</pre> import os import anywidget import traitlets In\u00a0[\u00a0]: Copied! <pre>class MapWidget(anywidget.AnyWidget):\n    _esm = \"\"\"\n    import * as L from \"https://esm.sh/leaflet@1.9.3\";\n    export function render(view) {\n    \n            let center = view.model.get(\"center\");\n            let zoom = view.model.get(\"zoom\");\n            let width = view.model.get(\"width\");\n            let height = view.model.get(\"height\");\n            \n            const container = document.createElement(\"div\");     \n            container.style.width = width;       \n            container.style.height = height;\n            \n            const map = L.map(container).setView(center, zoom);\n            L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n                attribution: 'Map data &amp;copy; &lt;a href=\"https://www.openstreetmap.org/\"&gt;OpenStreetMap&lt;/a&gt; contributors',\n                maxZoom: 24,\n            }).addTo(map);\n            \n            view.el.appendChild(container);\n        }\n    \"\"\"\n\n    _css = \"https://unpkg.com/leaflet@1.9.3/dist/leaflet.css\"\n\n    center = traitlets.List([20, 0]).tag(sync=True, o=True)\n    zoom = traitlets.Int(2).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n\n\nm = MapWidget(center=[20, 0], zoom=2, height=\"600px\")\nm\n</pre> class MapWidget(anywidget.AnyWidget):     _esm = \"\"\"     import * as L from \"https://esm.sh/leaflet@1.9.3\";     export function render(view) {                  let center = view.model.get(\"center\");             let zoom = view.model.get(\"zoom\");             let width = view.model.get(\"width\");             let height = view.model.get(\"height\");                          const container = document.createElement(\"div\");                  container.style.width = width;                    container.style.height = height;                          const map = L.map(container).setView(center, zoom);             L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {                 attribution: 'Map data \u00a9 OpenStreetMap contributors',                 maxZoom: 24,             }).addTo(map);                          view.el.appendChild(container);         }     \"\"\"      _css = \"https://unpkg.com/leaflet@1.9.3/dist/leaflet.css\"      center = traitlets.List([20, 0]).tag(sync=True, o=True)     zoom = traitlets.Int(2).tag(sync=True, o=True)     width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)     height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)   m = MapWidget(center=[20, 0], zoom=2, height=\"600px\") m In\u00a0[\u00a0]: Copied! <pre>class MapWidget(anywidget.AnyWidget):\n    _esm = \"\"\"\n    import maplibregl from \"https://esm.sh/maplibre-gl@2.4.0\";\n\n    export function render(view) {\n    \n        let center = view.model.get(\"center\");\n        center.reverse();\n        let zoom = view.model.get(\"zoom\");\n        let width = view.model.get(\"width\");\n        let height = view.model.get(\"height\");\n\n        const div = document.createElement(\"div\");\n        div.style.width = width;\n        div.style.height = height;\n\n        const map = new maplibregl.Map({\n          container: div,\n          style: 'https://demotiles.maplibre.org/style.json', // stylesheet location\n          center: center, // starting position [lng, lat]\n          zoom: zoom // starting zoom\n        });\n        view.el.appendChild(div);\n    }\n    \"\"\"\n    _css = \"https://esm.sh/maplibre-gl@2.4.0?css\"\n\n    center = traitlets.List([20, 0]).tag(sync=True, o=True)\n    zoom = traitlets.Int(2).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n\n\nm = MapWidget(center=[20, 0], zoom=2)\nm\n</pre> class MapWidget(anywidget.AnyWidget):     _esm = \"\"\"     import maplibregl from \"https://esm.sh/maplibre-gl@2.4.0\";      export function render(view) {              let center = view.model.get(\"center\");         center.reverse();         let zoom = view.model.get(\"zoom\");         let width = view.model.get(\"width\");         let height = view.model.get(\"height\");          const div = document.createElement(\"div\");         div.style.width = width;         div.style.height = height;          const map = new maplibregl.Map({           container: div,           style: 'https://demotiles.maplibre.org/style.json', // stylesheet location           center: center, // starting position [lng, lat]           zoom: zoom // starting zoom         });         view.el.appendChild(div);     }     \"\"\"     _css = \"https://esm.sh/maplibre-gl@2.4.0?css\"      center = traitlets.List([20, 0]).tag(sync=True, o=True)     zoom = traitlets.Int(2).tag(sync=True, o=True)     width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)     height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)   m = MapWidget(center=[20, 0], zoom=2) m In\u00a0[\u00a0]: Copied! <pre>class MapWidget(anywidget.AnyWidget):\n    _esm = \"\"\"\n    import mapboxgl from \"https://esm.sh/mapbox-gl@2.13.0\";\n\n    export function render(view) {\n        let center = view.model.get(\"center\");\n        center.reverse();\n        let zoom = view.model.get(\"zoom\");\n        let width = view.model.get(\"width\");\n        let height = view.model.get(\"height\");\n\n        const div = document.createElement(\"div\");\n        div.style.width = width;\n        div.style.height = height;\n\n        let token = view.model.get(\"token\");\n\n        mapboxgl.accessToken = token;\n        const map = new mapboxgl.Map({\n            container: div,\n            style: \"mapbox://styles/mapbox/streets-v12\",\n            center: center,\n            zoom: zoom,\n        });\n        view.el.appendChild(div);\n    }\n\n    \"\"\"\n    _css = \"https://esm.sh/mapbox-gl@2.13.0?css\"\n\n    default_token = os.environ.get(\"MAPBOX_TOKEN\")\n    token = traitlets.Unicode(default_token).tag(sync=True)\n    center = traitlets.List([20, 0]).tag(sync=True, o=True)\n    zoom = traitlets.Int(2).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n\n\nm = MapWidget(center=[20, 0], zoom=2)\nm\n</pre> class MapWidget(anywidget.AnyWidget):     _esm = \"\"\"     import mapboxgl from \"https://esm.sh/mapbox-gl@2.13.0\";      export function render(view) {         let center = view.model.get(\"center\");         center.reverse();         let zoom = view.model.get(\"zoom\");         let width = view.model.get(\"width\");         let height = view.model.get(\"height\");          const div = document.createElement(\"div\");         div.style.width = width;         div.style.height = height;          let token = view.model.get(\"token\");          mapboxgl.accessToken = token;         const map = new mapboxgl.Map({             container: div,             style: \"mapbox://styles/mapbox/streets-v12\",             center: center,             zoom: zoom,         });         view.el.appendChild(div);     }      \"\"\"     _css = \"https://esm.sh/mapbox-gl@2.13.0?css\"      default_token = os.environ.get(\"MAPBOX_TOKEN\")     token = traitlets.Unicode(default_token).tag(sync=True)     center = traitlets.List([20, 0]).tag(sync=True, o=True)     zoom = traitlets.Int(2).tag(sync=True, o=True)     width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)     height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)   m = MapWidget(center=[20, 0], zoom=2) m In\u00a0[\u00a0]: Copied! <pre>class MapWidget(anywidget.AnyWidget):\n    _esm = \"\"\"\n    function loadScript(src) {\n      return new Promise((resolve, reject) =&gt; {\n        let script = Object.assign(document.createElement(\"script\"), {\n          type: \"text/javascript\",\n          async: true,\n          src: src,\n        });\n        script.addEventListener(\"load\", resolve);\n        script.addEventListener(\"error\", reject);\n        document.body.appendChild(script);\n      });\n    };\n    \n    await loadScript(\"https://cesium.com/downloads/cesiumjs/releases/1.103/Build/Cesium/Cesium.js\");\n    \n    export function render(view) {\n    \n      let width = view.model.get(\"width\");\n      let height = view.model.get(\"height\");\n        \n      const div = document.createElement(\"div\");\n      div.style.width = width;\n      div.style.height = height;\n      \n      Cesium.Ion.defaultAccessToken = view.model.get(\"token\");\n\n      const viewer = new Cesium.Viewer(div, {\n        terrainProvider: Cesium.createWorldTerrain()\n      });    \n\n      const buildingTileset = viewer.scene.primitives.add(Cesium.createOsmBuildings());   \n\n      viewer.camera.flyTo({\n        destination : Cesium.Cartesian3.fromDegrees(-122.4175, 37.655, 400),\n        orientation : {\n          heading : Cesium.Math.toRadians(0.0),\n          pitch : Cesium.Math.toRadians(-15.0),\n        }\n      });\n      \n      view.el.appendChild(div);\n    }\n    \"\"\"\n    # make sure to include styles\n    _css = \"https://cesium.com/downloads/cesiumjs/releases/1.103/Build/Cesium/Widgets/widgets.css\"\n    default_token = os.environ.get(\"CESIUM_TOKEN\")\n    token = traitlets.Unicode(default_token).tag(sync=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n\n\nm = MapWidget()\nm\n</pre> class MapWidget(anywidget.AnyWidget):     _esm = \"\"\"     function loadScript(src) {       return new Promise((resolve, reject) =&gt; {         let script = Object.assign(document.createElement(\"script\"), {           type: \"text/javascript\",           async: true,           src: src,         });         script.addEventListener(\"load\", resolve);         script.addEventListener(\"error\", reject);         document.body.appendChild(script);       });     };          await loadScript(\"https://cesium.com/downloads/cesiumjs/releases/1.103/Build/Cesium/Cesium.js\");          export function render(view) {            let width = view.model.get(\"width\");       let height = view.model.get(\"height\");                const div = document.createElement(\"div\");       div.style.width = width;       div.style.height = height;              Cesium.Ion.defaultAccessToken = view.model.get(\"token\");        const viewer = new Cesium.Viewer(div, {         terrainProvider: Cesium.createWorldTerrain()       });            const buildingTileset = viewer.scene.primitives.add(Cesium.createOsmBuildings());           viewer.camera.flyTo({         destination : Cesium.Cartesian3.fromDegrees(-122.4175, 37.655, 400),         orientation : {           heading : Cesium.Math.toRadians(0.0),           pitch : Cesium.Math.toRadians(-15.0),         }       });              view.el.appendChild(div);     }     \"\"\"     # make sure to include styles     _css = \"https://cesium.com/downloads/cesiumjs/releases/1.103/Build/Cesium/Widgets/widgets.css\"     default_token = os.environ.get(\"CESIUM_TOKEN\")     token = traitlets.Unicode(default_token).tag(sync=True)     width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)     height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)   m = MapWidget() m In\u00a0[\u00a0]: Copied! <pre>class MapWidget(anywidget.AnyWidget):\n    _esm = \"\"\"\n    function loadScript(src) {\n      return new Promise((resolve, reject) =&gt; {\n        let script = Object.assign(document.createElement(\"script\"), {\n          type: \"text/javascript\",\n          async: true,\n          src: src,\n        });\n        script.addEventListener(\"load\", resolve);\n        script.addEventListener(\"error\", reject);\n        document.body.appendChild(script);\n      });\n    };\n    \n    await loadScript(\"https://cdn.jsdelivr.net/npm/ol@v7.3.0/dist/ol.js\");\n    \n    export function render(view) {\n    \n      let center = view.model.get(\"center\");\n      center.reverse();\n      let zoom = view.model.get(\"zoom\");\n      let width = view.model.get(\"width\");\n      let height = view.model.get(\"height\");\n\n      const div = document.createElement(\"div\");\n      div.style.width = width;\n      div.style.height = height;\n      \n        var map = new ol.Map({\n            target: div,\n            layers: [\n                new ol.layer.Tile({\n                    source: new ol.source.OSM()\n                })\n            ],\n            view: new ol.View({\n                center: ol.proj.fromLonLat(center),\n                zoom: zoom\n            })\n        });\n      view.el.appendChild(div);\n    }\n    \"\"\"\n    # make sure to include styles\n    _css = \"https://cdn.jsdelivr.net/npm/ol@v7.3.0/ol.css\"\n    center = traitlets.List([20, 0]).tag(sync=True, o=True)\n    zoom = traitlets.Int(2).tag(sync=True, o=True)\n    width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)\n    height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)\n\n\nm = MapWidget(center=[20, 0], zoom=2)\nm\n</pre> class MapWidget(anywidget.AnyWidget):     _esm = \"\"\"     function loadScript(src) {       return new Promise((resolve, reject) =&gt; {         let script = Object.assign(document.createElement(\"script\"), {           type: \"text/javascript\",           async: true,           src: src,         });         script.addEventListener(\"load\", resolve);         script.addEventListener(\"error\", reject);         document.body.appendChild(script);       });     };          await loadScript(\"https://cdn.jsdelivr.net/npm/ol@v7.3.0/dist/ol.js\");          export function render(view) {            let center = view.model.get(\"center\");       center.reverse();       let zoom = view.model.get(\"zoom\");       let width = view.model.get(\"width\");       let height = view.model.get(\"height\");        const div = document.createElement(\"div\");       div.style.width = width;       div.style.height = height;                var map = new ol.Map({             target: div,             layers: [                 new ol.layer.Tile({                     source: new ol.source.OSM()                 })             ],             view: new ol.View({                 center: ol.proj.fromLonLat(center),                 zoom: zoom             })         });       view.el.appendChild(div);     }     \"\"\"     # make sure to include styles     _css = \"https://cdn.jsdelivr.net/npm/ol@v7.3.0/ol.css\"     center = traitlets.List([20, 0]).tag(sync=True, o=True)     zoom = traitlets.Int(2).tag(sync=True, o=True)     width = traitlets.Unicode(\"100%\").tag(sync=True, o=True)     height = traitlets.Unicode(\"600px\").tag(sync=True, o=True)   m = MapWidget(center=[20, 0], zoom=2) m"},{"location":"examples/esm/#leaflet","title":"Leaflet\u00b6","text":""},{"location":"examples/esm/#maplibre","title":"Maplibre\u00b6","text":""},{"location":"examples/esm/#mapbox","title":"Mapbox\u00b6","text":""},{"location":"examples/esm/#cesium","title":"Cesium\u00b6","text":""},{"location":"examples/esm/#openlayers","title":"OpenLayers\u00b6","text":""},{"location":"examples/leaflet/","title":"Leaflet","text":"In\u00a0[\u00a0]: Copied! <pre># %pip install mapwidget\n</pre> # %pip install mapwidget In\u00a0[\u00a0]: Copied! <pre>import mapwidget\n</pre> import mapwidget In\u00a0[\u00a0]: Copied! <pre>m = mapwidget.Map(center=[20, 0], zoom=2, height=\"600px\")\nm\n</pre> m = mapwidget.Map(center=[20, 0], zoom=2, height=\"600px\") m In\u00a0[\u00a0]: Copied! <pre>m.add_basemap(\"HYBRID\")\n</pre> m.add_basemap(\"HYBRID\") In\u00a0[\u00a0]: Copied! <pre>m.add_basemap(\"OpenTopoMap\")\n</pre> m.add_basemap(\"OpenTopoMap\") In\u00a0[\u00a0]: Copied! <pre>from mapwidget.basemaps import get_basemap_list\n\nprint(len(get_basemap_list()))\n</pre> from mapwidget.basemaps import get_basemap_list  print(len(get_basemap_list())) In\u00a0[\u00a0]: Copied! <pre>get_basemap_list()[:10]\n</pre> get_basemap_list()[:10] In\u00a0[\u00a0]: Copied! <pre>m.clicked_latlng\n</pre> m.clicked_latlng In\u00a0[\u00a0]: Copied! <pre>m.center\n</pre> m.center In\u00a0[\u00a0]: Copied! <pre>m.bounds\n</pre> m.bounds In\u00a0[\u00a0]: Copied! <pre>m.zoom\n</pre> m.zoom"},{"location":"examples/mapbox/","title":"Mapbox","text":"In\u00a0[\u00a0]: Copied! <pre># %pip install mapwidget\n</pre> # %pip install mapwidget In\u00a0[\u00a0]: Copied! <pre>import mapwidget.mapbox as mapwidget\n</pre> import mapwidget.mapbox as mapwidget <p>You need a Mapbox access token to use the Mapbox widget. First, sign up for a free Mapbox account. Then, you can create a token by following the instructions here. Set <code>Mapbox_TOKEN</code> as an environment variable to use the Mapbox widget. Alternatively, uncomment the following code block and replace <code>YOUR-API-TOKEN</code> with your Mapbox access token.</p> In\u00a0[\u00a0]: Copied! <pre># import os\n# os.environ['MAPBOX_TOKEN'] = 'YOUR-API-TOKEN'\n</pre> # import os # os.environ['MAPBOX_TOKEN'] = 'YOUR-API-TOKEN' In\u00a0[\u00a0]: Copied! <pre>m = mapwidget.Map(center=[20, 0], zoom=2, height=\"600px\")\nm\n</pre> m = mapwidget.Map(center=[20, 0], zoom=2, height=\"600px\") m <p></p> In\u00a0[\u00a0]: Copied! <pre>m.clicked_latlng\n</pre> m.clicked_latlng In\u00a0[\u00a0]: Copied! <pre>m.zoom\n</pre> m.zoom In\u00a0[\u00a0]: Copied! <pre>m.center\n</pre> m.center In\u00a0[\u00a0]: Copied! <pre>m.bounds\n</pre> m.bounds In\u00a0[\u00a0]: Copied! <pre>esm = \"\"\"\n\n    const map = new mapboxgl.Map({\n        container: 'map',\n        zoom: 14,\n        center: [-114.26608, 32.7213],\n        pitch: 80,\n        bearing: 41,\n        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio\n        style: 'mapbox://styles/mapbox/satellite-streets-v12'\n    });\n\n    map.on('style.load', () =&gt; {\n        map.addSource('mapbox-dem', {\n            'type': 'raster-dem',\n            'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n            'tileSize': 512,\n            'maxzoom': 14\n        });\n        // add the DEM source as a terrain layer with exaggerated height\n        map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });\n    });\n\n\n\"\"\"\n</pre> esm = \"\"\"      const map = new mapboxgl.Map({         container: 'map',         zoom: 14,         center: [-114.26608, 32.7213],         pitch: 80,         bearing: 41,         // Choose from Mapbox's core styles, or make your own style with Mapbox Studio         style: 'mapbox://styles/mapbox/satellite-streets-v12'     });      map.on('style.load', () =&gt; {         map.addSource('mapbox-dem', {             'type': 'raster-dem',             'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',             'tileSize': 512,             'maxzoom': 14         });         // add the DEM source as a terrain layer with exaggerated height         map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });     });   \"\"\" In\u00a0[\u00a0]: Copied! <pre>m.set_esm(esm)\nm\n</pre> m.set_esm(esm) m <p></p> In\u00a0[\u00a0]: Copied! <pre>esm = \"\"\"\n\n    (async () =&gt; {\n        const map = new mapboxgl.Map({\n            container: 'map',\n            zoom: 13,\n            center: [6.6301, 45.35625],\n            pitch: 80,\n            bearing: 160,\n            interactive: false,\n            // Choose from Mapbox's core styles, or make your own style with Mapbox Studio\n            style: 'mapbox://styles/mapbox/satellite-v9'\n        });\n\n        await map.once('style.load');\n\n        // Add daytime fog\n        map.setFog({\n            'range': [-1, 2],\n            'horizon-blend': 0.3,\n            'color': 'white',\n            'high-color': '#add8e6',\n            'space-color': '#d8f2ff',\n            'star-intensity': 0.0\n        });\n\n        // Add 3D terrain\n        map.addSource('mapbox-dem', {\n            'type': 'raster-dem',\n            'url': 'mapbox://mapbox.terrain-rgb',\n            'tileSize': 512,\n            'maxzoom': 14\n        });\n        map.setTerrain({\n            'source': 'mapbox-dem',\n            'exaggeration': 1.5\n        });\n\n        // Run a timing loop to switch between day and night\n        await map.once('idle');\n\n        let lastTime = 0.0;\n        let animationTime = 0.0;\n        let cycleTime = 0.0;\n        let night = true;\n\n        const initialBearing = map.getBearing();\n\n        function frame(time) {\n            const elapsedTime = (time - lastTime) / 1000.0;\n\n            animationTime += elapsedTime;\n            cycleTime += elapsedTime;\n\n            if (cycleTime &gt;= 10.0) {\n                if (night) {\n                    // night fog styling\n                    map.setFog({\n                        'range': [-1, 2],\n                        'horizon-blend': 0.3,\n                        'color': '#242B4B',\n                        'high-color': '#161B36',\n                        'space-color': '#0B1026',\n                        'star-intensity': 0.8\n                    });\n                } else {\n                    // day fog styling\n                    map.setFog({\n                        'range': [-1, 2],\n                        'horizon-blend': 0.3,\n                        'color': 'white',\n                        'high-color': '#add8e6',\n                        'space-color': '#d8f2ff',\n                        'star-intensity': 0.0\n                    });\n                }\n\n                night = !night;\n                cycleTime = 0.0;\n            }\n\n            const rotation = initialBearing + animationTime * 2.0;\n            map.setBearing(rotation % 360);\n\n            lastTime = time;\n\n            window.requestAnimationFrame(frame);\n        }\n\n        window.requestAnimationFrame(frame);\n    })();\n\n\"\"\"\n</pre> esm = \"\"\"      (async () =&gt; {         const map = new mapboxgl.Map({             container: 'map',             zoom: 13,             center: [6.6301, 45.35625],             pitch: 80,             bearing: 160,             interactive: false,             // Choose from Mapbox's core styles, or make your own style with Mapbox Studio             style: 'mapbox://styles/mapbox/satellite-v9'         });          await map.once('style.load');          // Add daytime fog         map.setFog({             'range': [-1, 2],             'horizon-blend': 0.3,             'color': 'white',             'high-color': '#add8e6',             'space-color': '#d8f2ff',             'star-intensity': 0.0         });          // Add 3D terrain         map.addSource('mapbox-dem', {             'type': 'raster-dem',             'url': 'mapbox://mapbox.terrain-rgb',             'tileSize': 512,             'maxzoom': 14         });         map.setTerrain({             'source': 'mapbox-dem',             'exaggeration': 1.5         });          // Run a timing loop to switch between day and night         await map.once('idle');          let lastTime = 0.0;         let animationTime = 0.0;         let cycleTime = 0.0;         let night = true;          const initialBearing = map.getBearing();          function frame(time) {             const elapsedTime = (time - lastTime) / 1000.0;              animationTime += elapsedTime;             cycleTime += elapsedTime;              if (cycleTime &gt;= 10.0) {                 if (night) {                     // night fog styling                     map.setFog({                         'range': [-1, 2],                         'horizon-blend': 0.3,                         'color': '#242B4B',                         'high-color': '#161B36',                         'space-color': '#0B1026',                         'star-intensity': 0.8                     });                 } else {                     // day fog styling                     map.setFog({                         'range': [-1, 2],                         'horizon-blend': 0.3,                         'color': 'white',                         'high-color': '#add8e6',                         'space-color': '#d8f2ff',                         'star-intensity': 0.0                     });                 }                  night = !night;                 cycleTime = 0.0;             }              const rotation = initialBearing + animationTime * 2.0;             map.setBearing(rotation % 360);              lastTime = time;              window.requestAnimationFrame(frame);         }          window.requestAnimationFrame(frame);     })();  \"\"\" In\u00a0[\u00a0]: Copied! <pre>m.set_esm(esm)\nm\n</pre> m.set_esm(esm) m <p></p>"},{"location":"examples/maplibre/","title":"Maplibre","text":"In\u00a0[\u00a0]: Copied! <pre># %pip install mapwidget\n</pre> # %pip install mapwidget In\u00a0[\u00a0]: Copied! <pre>import mapwidget.maplibre as mapwidget\n</pre> import mapwidget.maplibre as mapwidget In\u00a0[\u00a0]: Copied! <pre>m = mapwidget.Map()\nm\n</pre> m = mapwidget.Map() m In\u00a0[\u00a0]: Copied! <pre>m.add_call(\"flyTo\", [{\"center\": [-100, 40], \"zoom\": 10}])\n</pre> m.add_call(\"flyTo\", [{\"center\": [-100, 40], \"zoom\": 10}]) In\u00a0[\u00a0]: Copied! <pre>m.center\n</pre> m.center In\u00a0[\u00a0]: Copied! <pre>m.zoom\n</pre> m.zoom In\u00a0[\u00a0]: Copied! <pre>m.bounds\n</pre> m.bounds In\u00a0[\u00a0]: Copied! <pre>m.clicked_latlng\n</pre> m.clicked_latlng In\u00a0[\u00a0]: Copied! <pre>esm = \"\"\"\n\n    var videoStyle = {\n        'version': 8,\n        'sources': {\n            'satellite': {\n                'type': 'raster',\n                'url':\n                    'https://api.maptiler.com/tiles/satellite/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL',\n                'tileSize': 256\n            },\n            'video': {\n                'type': 'video',\n                'urls': [\n                    'https://static-assets.mapbox.com/mapbox-gl-js/drone.mp4',\n                    'https://static-assets.mapbox.com/mapbox-gl-js/drone.webm'\n                ],\n                'coordinates': [\n                    [-122.51596391201019, 37.56238816766053],\n                    [-122.51467645168304, 37.56410183312965],\n                    [-122.51309394836426, 37.563391708549425],\n                    [-122.51423120498657, 37.56161849366671]\n                ]\n            }\n        },\n        'layers': [\n            {\n                'id': 'background',\n                'type': 'background',\n                'paint': {\n                    'background-color': 'rgb(4,7,14)'\n                }\n            },\n            {\n                'id': 'satellite',\n                'type': 'raster',\n                'source': 'satellite'\n            },\n            {\n                'id': 'video',\n                'type': 'raster',\n                'source': 'video'\n            }\n        ]\n    };\n\n    var map = new maplibregl.Map({\n        container: 'map',\n        minZoom: 14,\n        zoom: 17,\n        center: [-122.514426, 37.562984],\n        bearing: -96,\n        style: videoStyle\n    });\n\n    var playingVideo = true;\n\n    map.on('click', function () {\n        playingVideo = !playingVideo;\n\n        if (playingVideo) map.getSource('video').play();\n        else map.getSource('video').pause();\n    });\n\n\"\"\"\n</pre> esm = \"\"\"      var videoStyle = {         'version': 8,         'sources': {             'satellite': {                 'type': 'raster',                 'url':                     'https://api.maptiler.com/tiles/satellite/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL',                 'tileSize': 256             },             'video': {                 'type': 'video',                 'urls': [                     'https://static-assets.mapbox.com/mapbox-gl-js/drone.mp4',                     'https://static-assets.mapbox.com/mapbox-gl-js/drone.webm'                 ],                 'coordinates': [                     [-122.51596391201019, 37.56238816766053],                     [-122.51467645168304, 37.56410183312965],                     [-122.51309394836426, 37.563391708549425],                     [-122.51423120498657, 37.56161849366671]                 ]             }         },         'layers': [             {                 'id': 'background',                 'type': 'background',                 'paint': {                     'background-color': 'rgb(4,7,14)'                 }             },             {                 'id': 'satellite',                 'type': 'raster',                 'source': 'satellite'             },             {                 'id': 'video',                 'type': 'raster',                 'source': 'video'             }         ]     };      var map = new maplibregl.Map({         container: 'map',         minZoom: 14,         zoom: 17,         center: [-122.514426, 37.562984],         bearing: -96,         style: videoStyle     });      var playingVideo = true;      map.on('click', function () {         playingVideo = !playingVideo;          if (playingVideo) map.getSource('video').play();         else map.getSource('video').pause();     });  \"\"\" In\u00a0[\u00a0]: Copied! <pre>m.set_esm(esm)\nm\n</pre> m.set_esm(esm) m In\u00a0[\u00a0]: Copied! <pre>esm = \"\"\"\n\n    var map = (window.map = new maplibregl.Map({\n        container: 'map',\n        zoom: 12,\n        center: [11.39085, 47.27574],\n        pitch: 52,\n        hash: true,\n        style: {\n            version: 8,\n            sources: {\n                osm: {\n                    type: 'raster',\n                    tiles: ['https://a.tile.openstreetmap.org/{z}/{x}/{y}.png'],\n                    tileSize: 256,\n                    attribution: '&amp;copy; OpenStreetMap Contributors',\n                    maxzoom: 19\n                },\n                terrainSource: {\n                    type: 'raster-dem',\n                    url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',\n                    tileSize: 256\n                },\n                hillshadeSource: {\n                    type: 'raster-dem',\n                    url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',\n                    tileSize: 256\n                }\n            },\n            layers: [\n                {\n                    id: 'osm',\n                    type: 'raster',\n                    source: 'osm'\n                },\n                {\n                    id: 'hills',\n                    type: 'hillshade',\n                    source: 'hillshadeSource',\n                    layout: { visibility: 'visible' },\n                    paint: { 'hillshade-shadow-color': '#473B24' }\n                }\n            ],\n            terrain: {\n                source: 'terrainSource',\n                exaggeration: 1\n            }\n        },\n        maxZoom: 18,\n        maxPitch: 85\n    }));\n\n    map.addControl(\n        new maplibregl.NavigationControl({\n            visualizePitch: true,\n            showZoom: true,\n            showCompass: true\n        })\n    );\n\n    map.addControl(\n        new maplibregl.TerrainControl({\n            source: 'terrainSource',\n            exaggeration: 1\n        })\n    );\n\n\"\"\"\n</pre> esm = \"\"\"      var map = (window.map = new maplibregl.Map({         container: 'map',         zoom: 12,         center: [11.39085, 47.27574],         pitch: 52,         hash: true,         style: {             version: 8,             sources: {                 osm: {                     type: 'raster',                     tiles: ['https://a.tile.openstreetmap.org/{z}/{x}/{y}.png'],                     tileSize: 256,                     attribution: '\u00a9 OpenStreetMap Contributors',                     maxzoom: 19                 },                 terrainSource: {                     type: 'raster-dem',                     url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',                     tileSize: 256                 },                 hillshadeSource: {                     type: 'raster-dem',                     url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',                     tileSize: 256                 }             },             layers: [                 {                     id: 'osm',                     type: 'raster',                     source: 'osm'                 },                 {                     id: 'hills',                     type: 'hillshade',                     source: 'hillshadeSource',                     layout: { visibility: 'visible' },                     paint: { 'hillshade-shadow-color': '#473B24' }                 }             ],             terrain: {                 source: 'terrainSource',                 exaggeration: 1             }         },         maxZoom: 18,         maxPitch: 85     }));      map.addControl(         new maplibregl.NavigationControl({             visualizePitch: true,             showZoom: true,             showCompass: true         })     );      map.addControl(         new maplibregl.TerrainControl({             source: 'terrainSource',             exaggeration: 1         })     );  \"\"\" In\u00a0[\u00a0]: Copied! <pre>m.set_esm(esm)\nm\n</pre> m.set_esm(esm) m"},{"location":"examples/openlayers/","title":"Openlayers","text":"In\u00a0[\u00a0]: Copied! <pre># %pip install mapwidget\n</pre> # %pip install mapwidget In\u00a0[\u00a0]: Copied! <pre>import mapwidget.openlayers as mapwidget\n</pre> import mapwidget.openlayers as mapwidget In\u00a0[\u00a0]: Copied! <pre>m = mapwidget.Map(center=[20, 0], zoom=2, height=\"600px\")\nm\n</pre> m = mapwidget.Map(center=[20, 0], zoom=2, height=\"600px\") m In\u00a0[\u00a0]: Copied! <pre>m.clicked_latlng\n</pre> m.clicked_latlng In\u00a0[\u00a0]: Copied! <pre>m.center\n</pre> m.center In\u00a0[\u00a0]: Copied! <pre>m.zoom\n</pre> m.zoom In\u00a0[\u00a0]: Copied! <pre>m.bounds\n</pre> m.bounds"}]}